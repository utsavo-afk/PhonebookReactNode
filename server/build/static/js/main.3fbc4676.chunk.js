(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(15),a=n.n(c),s=n(4),r=n(2),o=n(1),u=n(5),i=n.n(u),b="/api/contacts",j=n(0),l=function(e){var t=e.contacts,n=e.newName,c=e.newNumber,a=e.setContacts,s=e.setName,r=e.setNumber,u=e.setAlertMessage,l=e.alertMessage;return Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Contact Form"}),Object(j.jsxs)("form",{onSubmit:function(e){e.preventDefault();var j,m,d,O={name:n,number:c},h=O.name,f=O.number;if(""===h||""===f)return u(Object(o.a)(Object(o.a)({},l),{},{type:"error",message:"Name/Number cannot be blank!"})),void setTimeout((function(){return u(Object(o.a)(Object(o.a)({},l),{},{message:""}))}),2e3);if(j=h,m=f,t.some((function(e){return e.name===j||e.number===m}))){if(window.confirm("Update ".concat(h,"'s contact?"))){var g=t.find((function(e){return e.name===h})),p=g.id,x=window.prompt("Enter new number"),v=Object(o.a)(Object(o.a)({},g),{},{number:x});return function(e,t){return i.a.put("".concat(b,"/").concat(e),t).then((function(e){return e.data}))}(p,v).then((function(e){a(t.map((function(t){return t.id!==p?t:e}))),u(Object(o.a)(Object(o.a)({},l),{},{type:"success",message:"".concat(h,"'s contact was updated")})),setTimeout((function(){return u(Object(o.a)(Object(o.a)({},l),{},{message:""}))}),2e3)})).catch((function(e){u(Object(o.a)(Object(o.a)({},l),{},{type:"error",message:e.response.data.error})),setTimeout((function(){return u(Object(o.a)(Object(o.a)({},l),{},{message:""}))}),2e3)}))}console.log("update cancelled"),s(""),r("")}return(d=O,i.a.post("".concat(b),d).then((function(e){return e.data}))).then((function(e){a(t.concat(e)),u(Object(o.a)(Object(o.a)({},l),{},{type:"success",message:"".concat(e.name," was added to contacts")})),setTimeout((function(){return u(Object(o.a)(Object(o.a)({},l),{},{message:""}))}),2e3)})).catch((function(e){console.log("contact addition failed!"),u(Object(o.a)(Object(o.a)({},l),{},{type:"error",message:e.response.data.error})),setTimeout((function(){return u(Object(o.a)(Object(o.a)({},l),{},{message:""}))}),2e3)}))},children:[Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"name",children:"name "}),Object(j.jsx)("input",{name:"contact_name",id:"name",value:n,onChange:function(e){return s(e.target.value)}})]}),Object(j.jsxs)("div",{children:[Object(j.jsx)("label",{htmlFor:"number",children:"number "}),Object(j.jsx)("input",{name:"contact_number",id:"number",value:c,onChange:function(e){return r(e.target.value)}})]}),Object(j.jsx)("button",{type:"submit",children:"add"})]})]})},m=function(e){var t=e.searchString,n=e.setSearchString;return Object(j.jsx)("div",{children:Object(j.jsxs)("form",{children:[Object(j.jsx)("label",{htmlFor:"search",children:"search "}),Object(j.jsx)("input",{type:"search",id:"search",name:"searchBar",value:t,onChange:function(e){return n(e.target.value)}})]})})},d=function(e){var t=e.name,n=e.number,c=e.id,a=e.contacts,s=e.setContacts,r=e.setAlertMessage,u=e.alertMessage,l=function(e){return window.confirm("Delete ".concat(t," ?"))?function(e){return i.a.delete("".concat(b,"/").concat(e)).then((function(){return console.log("contact deleted")}))}(e).then((function(){return s(a.filter((function(t){return t.id!==e})))})).then((function(){r(Object(o.a)(Object(o.a)({},u),{},{type:"success",message:"".concat(t," deleted successfully")})),setTimeout((function(){return r(Object(o.a)(Object(o.a)({},u),{},{message:""}))}),2e3)})).catch((function(e){r(Object(o.a)(Object(o.a)({},u),{},{type:"success",message:e.res.data})),setTimeout((function(){return r(Object(o.a)(Object(o.a)({},u),{},{message:""}))}),2e3)})):console.log("cancelled delete operation")};return Object(j.jsxs)("li",{children:[Object(j.jsxs)("span",{children:[t," ",n]})," ",Object(j.jsx)("button",{onClick:function(e){return l(c)},children:"delete"})]})},O=function(e){var t=e.contacts,n=e.setContacts,c=e.searchString,a=e.setSearchString,s=e.alertMessage,r=e.setAlertMessage;return 0===t.length?Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Contacts"}),Object(j.jsx)("p",{children:"There are no contacts"})]}):Object(j.jsxs)("div",{children:[Object(j.jsx)("h2",{children:"Contacts"}),Object(j.jsx)(m,{searchString:c,setSearchString:a}),Object(j.jsx)("ul",{children:c?t.filter((function(e){return e.name.toLowerCase().includes(c.toLowerCase())})).map((function(e){return Object(j.jsx)(d,{name:e.name,number:e.number,contacts:t,alertMessage:s,setAlertMessage:r},e.id)})):t.map((function(e){return Object(j.jsx)(d,{contacts:t,setContacts:n,id:e.id,name:e.name,number:e.number,alertMessage:s,setAlertMessage:r},e.id)}))})]})},h=function(e){var t=e.notification;return""===t.message?null:t.message&&"success"===t.type?Object(j.jsx)("div",{className:"success",children:t.message}):t.message&&"error"===t.type?Object(j.jsx)("div",{className:"error",children:t.message}):void 0},f=function(){var e=Object(r.useState)([]),t=Object(s.a)(e,2),n=t[0],c=t[1];Object(r.useEffect)((function(){i.a.get("".concat(b)).then((function(e){return e.data})).then((function(e){return c(e)})).catch((function(){return console.log("failed to fetch data")}))}),[]);var a=Object(r.useState)("add number..."),o=Object(s.a)(a,2),u=o[0],m=o[1],d=Object(r.useState)("add name..."),f=Object(s.a)(d,2),g=f[0],p=f[1],x=Object(r.useState)(""),v=Object(s.a)(x,2),S=v[0],w=v[1],C=Object(r.useState)({type:"",message:""}),y=Object(s.a)(C,2),M=y[0],N=y[1];return Object(j.jsxs)("div",{children:[Object(j.jsx)("h1",{children:"phonebook"}),Object(j.jsx)(h,{notification:M}),Object(j.jsx)(O,{contacts:n,searchString:S,setSearchString:w,setContacts:c,setAlertMessage:N,alertMessage:M}),Object(j.jsx)(l,{contacts:n,setContacts:c,newNumber:u,setNumber:m,newName:g,setName:p,setAlertMessage:N,alertMessage:M})]})};n(39);a.a.render(Object(j.jsx)(f,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.3fbc4676.chunk.js.map